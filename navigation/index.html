<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./a.css">
    <title>Document</title>
</head>
<body>
    <main>
        <div class="wrapper" id="main"></div>
    </main>
</body>




<script>
    function createButton(id){
        var button = document.createElement('button')
			button.textContent = '编辑'
			button.id = id
			button.onclick = function(xzkjcnxlkcjlk){

				var button2 = xzkjcnxlkcjlk['target']
				var img2 = button2.previousSibling
				var key = button2['id'] 
				var x = prompt('给我一个网址') 
				hash[key] = x 
				img2.src = 'http://'+x + '/favicon.ico'
				img2.onerror = function(xxx){
					xxx.target.src = '//i.loli.net/2017/11/10/5a05afbc5e183.png'
				}
				localStorage.setItem('zzz', JSON.stringify(hash))
			}
			return button
    }

    function createSpan(textContent){
    var span=document.createElement('span')
    span.textContent=textContent
    span.className="text"
    return span
    }

    function createImg(domain){
        var img=document.createElement('img')
        var m='http://'+ domain + '/favicon.ico' 
        if(domain==undefined){img.src = '//i.loli.net/2017/11/10/5a05afbc5e183.png'}
        else{img.src = m}
        img.onerror=function(x){img.scr='//i.loli.net/2017/11/10/5a05afbc5e183.png'}

         console.log(img.src)    
         return img
    }
var keys = {
    '0': {0:'q',1:'w',2:'e',3:'r',4:'t',5:'y',6:'u',7:'i',8:'o',9:'p',length:10},
    '1': {0:'a',1:'s',2:'d',3:'f',4:'g',5:'h',6:'j',7:'k',8:'l',length:9},
    '2': {0:'z',1:'x',2:'c',3:'v',4:'b',5:'n',6:'m',length:7},
    'length': 3
}


    var hash = {
    'q': 'qq.com',
    'w': 'weibo.com', 
    'e': 'ele.me', 
    'r': 'renren.com', 
    't': 'tianya.com',
    'y': 'youtube.com', 
    'u': 'uc.com' , 
    'i': 'iqiyi.com',
    'o': 'opera.com', 
    'p':  undefined, 
    'a': 'acfun.tv', 
    's': 'sohu.com', 
    'z': 'zhihu.com',
    'm': 'www.mcdonalds.com.cn'
    }
    var hashInLocalStorage = JSON.parse(localStorage.getItem('zzz') || 'null')
			if(hashInLocalStorage){
				hash = hashInLocalStorage
            }
    
    listenToUser(hash)        

for(var index=0;index<keys['length'];index=index+1){
var div=document.createElement('div')
div.className='row'
main.appendChild(div)
row=keys[index]
for(var index2=0;index2<row['length'];index2++){
kbd=document.createElement('kbd')
kbd.className='key'


var span=createSpan(row[index2])
kbd.appendChild(span)

var img=createImg(hash[row[index2]])
kbd.appendChild(img)

var button=createButton(row[index2])
kbd.appendChild(button)

div.appendChild(kbd)

}


}
function listenToUser(hash){
		document.onkeypress = function(xzkjcnxlkcjlk){
				var key = xzkjcnxlkcjlk['key']
				var website = hash[key]

				window.open('http://'+website, '_blank')
			}
		}


</script>


</html>